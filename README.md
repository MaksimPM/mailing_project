## <a id="title1">Сервис рассылок SkyMailings</a>

# Для корректной работы программы необходимо:
- Установите виртуальное окружение:
```shell
python3 -m venv venv
```
- Установите зависимости из файла "requirements.txt"
- Создайте файл ".env" и внесите в него все данные по образцу из файла ".env.sample"
- Запустите миграции:
```shell
python manage.py migrate
```
- Создайте Суперпользователя(админа), командой
```shell
python manage.py csu
```
- Создайте группу менеджеров:
```shell
python manage.py cgm
```
- Установите и запустите сервер redis.

<a id="title2">Логика работы системы</a>
---
- Создайте новую рассылку, если текущее время больше или равно времени начала, выбираются все клиенты, которые указаны в настройках рассылки, и запускается отправка для всех этих клиентов.

- Если время начала рассылки еще не наступило, то отправка стартует автоматически при наступлении указанного времени без дополнительных действий пользователя. При отправке сообщений собирается статистика по каждой рассылке для формирования отчетов.

Права доступа: 
- Для неавторизованного пользователя открыт доступ только к главной странице, странице авторизации и закрыт весь функционал системы.
- Авторизованный пользователь имеет доступ только к своим клиентам, сообщениям, рассылкам и отчету о своих рассылках. Персонал может просматривать списки всех клиентов, сообщений, рассылок, пользователей сервиса и имеет доступ к отчету о всех проведенных рассылках.
- Чтобы добавить пользователя в группу менеджеров, в административной панели установите ему статус персонала и в разделе групп, выберите группу "manager".


---

- Для запуска работы сервиса по расписанию, используйте команду
```shell
python manage.py run_apscheduler
```
- Для запуска сервиса вручную, используйте команду
```shell
python manage.py run_mailings
```
